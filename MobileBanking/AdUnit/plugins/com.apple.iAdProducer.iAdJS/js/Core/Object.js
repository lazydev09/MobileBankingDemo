
/**
*
* Copyright Â© 2009-2011 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Object",archivedProperties:["delegate","dataSource"]});iAd.Object.PROPERTY_CHANGED="handlePropertyChange";iAd.Object.prototype.init=function(){this.observedProperties={}};iAd.Object.DELEGATE_REG_EXP=/delegate/i;iAd.Object.DATA_SOURCE_REG_EXP=/dataSource/i;iAd.Object.prototype.archiveProperty=function(b){var a=this[b];if(iAd.Object.DELEGATE_REG_EXP.test(b)||iAd.Object.DATA_SOURCE_REG_EXP.test(b)){if(iAd.ViewController&&a instanceof iAd.ViewController){return a.id}return a?iAd.Archiver.referenceForObject(a):null}return a};iAd.Object.prototype.restoreProperty=function(b,a){if(iAd.Object.DELEGATE_REG_EXP.test(b)||iAd.Object.DATA_SOURCE_REG_EXP.test(b)){if(iAd.ViewController&&iAd.ViewController.instances[a]){a=iAd.ViewController.instances[a]}else{a=iAd.Archiver.objectForReference(a)}}this[b]=a};iAd.Object.prototype.callSuper=function(){var a=iAd.Object.prototype.callSuper.caller;if(iAd.Utils.objectHasMethod(a,"superclass")){a.superclass.apply(this,arguments)}else{var c=a._class.superclass.prototype;var b=a._name;if(iAd.Utils.objectHasMethod(c,b)){return c[b].apply(this,arguments)}}};iAd.Object.prototype.isPropertyObserved=function(a){return(this.observedProperties[a]!==undefined)};iAd.Object.prototype.addPropertyObserver=function(c,b,a){var d=this.observedProperties[c];if(!this.isPropertyObserved(c)){d=this.observedProperties[c]={targets:[],methodNames:[]}}else{if(d.targets.indexOf(b)>-1){return}}var a=a||iAd.Object.PROPERTY_CHANGED;if(iAd.Utils.objectHasMethod(b,a)){d.targets.push(b);d.methodNames.push(a)}};iAd.Object.prototype.removePropertyObserver=function(c,b){if(!this.isPropertyObserved(c)){return false}var e=this.observedProperties[c];var d=e.targets.indexOf(b);var a=d>-1;if(a){e.targets.splice(d,1);e.methodNames.splice(d,1);if(e.targets.length==0){delete this.observedProperties[c]}}return a};iAd.Object.prototype.notifyPropertyChange=function(b){if(!this.isPropertyObserved(b)){return}var f=this.observedProperties[b];var a=f.targets.slice();var e=f.methodNames.slice();for(var c=0,d=a.length;c<d;c++){a[c][e[c]](this,b)}};iAd.Object.prototype.callMethodNameAfterDelay=function(a,d){var e=this;var c=Array.prototype.slice.call(arguments,2);var b=function(){e[a].apply(e,c)};b.displayName=iAd.Utils.createDisplayName(this.constructor.displayName||this.constructor.name,a);return setTimeout(b,d*1000)};