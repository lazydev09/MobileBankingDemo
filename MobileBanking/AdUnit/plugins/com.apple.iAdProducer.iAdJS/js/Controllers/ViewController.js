
/**
*
* Copyright © 2009-2011 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ViewController",superclass:iAd.Object,mixins:[iAd.EventTarget],synthesizedProperties:["view","title","loadingRequiredFiles","loadedAllRequiredFiles","viewWasProcessed","contentView","interfaceOrientation","contentSizeForViewInPopover"],archivedProperties:["configuration","viewWasArchived","title","toolbarItems","requiredFilesLoadDelegate","stateChangeDelegate","actionListDelegate","wasBackItemTransition","becomesBackItemTransition","wasTopItemTransition","becomesTopItemTransition","becomesHiddenTransition","becomesVisibleTransition","buildInActionListShouldOccurAfterTransition","buildOutActionListShouldDelayTransition","disableLoadingViewController","viewLoadingDelaysTransition","contentSizeForViewInPopover","modalInPopover"]});iAd.ViewController.__minimalViewLoadingTime=0;iAd.ViewController.prototype.init=function(d){this.requiredFilesLoadDelegate=null;this.stateChangeDelegate=null;this.actionListDelegate=null;this.callSuper();this.configuration={};this.shouldSetUpContentViewUponLoad=false;this.shouldProcessViewUponRequestsCompleted=false;this.viewIsLoaded=false;this.viewWasArchived=false;this.shouldArchiveView=true;if(iAd.Utils.objectIsString(d)){this.configuration={id:d}}else{if(d!==undefined&&d!==null){this.configuration=d}}this.id=this.configuration.id||iAd.ViewController.uniqueId();this._view=null;this._contentView=null;this._title="";this._tabBarItem=null;this._navigationItem=null;this._toolbarItems=null;this._viewWasProcessed=false;this.outlets={};this.eventTarget=document;this.modalViewController=null;this.parentViewController=null;this.viewAppearancePropagationProperty=null;this.modalTransitionStyle=null;this.searchDisplayController=null;this.wasBackItemTransition=iAd.ViewController.TRANSITION_IN_FROM_LEFT;this.becomesBackItemTransition=iAd.ViewController.TRANSITION_OUT_TO_LEFT;this.wasTopItemTransition=iAd.ViewController.TRANSITION_OUT_TO_RIGHT;this.becomesTopItemTransition=iAd.ViewController.TRANSITION_IN_FROM_RIGHT;this.becomesHiddenTransition=iAd.ViewController.TRANSITION_DISSOLVE_OUT;this.becomesVisibleTransition=iAd.ViewController.TRANSITION_DISSOLVE_IN;this.buildInActionListShouldOccurAfterTransition=false;this.buildOutActionListShouldDelayTransition=false;this.disableLoadingViewController=false;this.viewLoadingDelaysTransition=true;this.__minimalViewLoadingTime=iAd.ViewController.__minimalViewLoadingTime;this.contentSizeForViewInPopover=new iAd.Size(320,1100);this.modalInPopover=false;iAd.ViewController.instances[this.id]=this;iAd.Utils.copyPropertiesFromSourceToTarget(this.configuration.properties,this);this.actionListManagersByName={};this.actionListByName={};this.actionListNameByClassName={};var a=this.configuration.actionLists;if(a){for(var b=0,c=a.length;b<c;b++){this.loadActionList(a[b])}}};iAd.ViewController.restoreFromArchive=function(a){return new this(a.configuration)};iAd.ViewController.instances={};iAd.ViewController.viewProcessors=[];iAd.ViewController.WILL_LOAD_REQUIRED_FILES="viewControllerWillLoadRequiredFiles";iAd.ViewController.PROGRESS_LOADING_REQUIRED_FILES="viewControllerProgressLoadingRequiredFiles";iAd.ViewController.DID_LOAD_REQUIRED_FILES="viewControllerDidLoadRequiredFiles";iAd.ViewController.DID_ABORT_LOAD_REQUIRED_FILES="viewControllerDidAbortLoadRequiredFiles";iAd.ViewController.DID_ENTER_STATE="viewControllerDidEnterState";iAd.ViewController.DID_EXIT_STATE="viewControllerDidExitState";iAd.ViewController.ACTION_LIST_WILL_START="viewControllerActionListWillStart";iAd.ViewController.ACTION_LIST_DID_START="viewControllerActionListDidStart";iAd.ViewController.ACTION_LIST_WILL_ITERATE="viewControllerActionListWillIterate";iAd.ViewController.ACTION_LIST_DID_ITERATE="viewControllerActionListDidIterate";iAd.ViewController.ACTION_LIST_WILL_COMPLETE="viewControllerActionListWillComplete";iAd.ViewController.ACTION_LIST_DID_COMPLETE="viewControllerActionListDidComplete";iAd.ViewController.ACTION_LIST_DID_CANCEL="viewControllerActionListDidCancel";iAd.ViewController.ACTION_LIST_DID_PROGRESS="viewControllerActionListDidProgress";iAd.ViewController.VIEW_WILL_APPEAR_STATE="ad-view-will-appear";iAd.ViewController.VIEW_DID_APPEAR_STATE="ad-view-did-appear";iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE="ad-view-will-disappear";iAd.ViewController.VIEW_DID_DISAPPEAR_STATE="ad-view-did-disappear";iAd.ViewController.APPEARANCE_STATES=[iAd.ViewController.VIEW_WILL_APPEAR_STATE,iAd.ViewController.VIEW_DID_APPEAR_STATE,iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE,iAd.ViewController.VIEW_DID_DISAPPEAR_STATE];iAd.ViewController.VIEW_WILL_APPEAR_EVENT="viewControllerViewWillAppear";iAd.ViewController.VIEW_DID_APPEAR_EVENT="viewControllerViewDidAppear";iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT="viewControllerViewWillDisappear";iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT="viewControllerViewDidDisappear";iAd.ViewController.VIEW_DID_LOAD="viewControllerViewDidLoad";iAd.ViewController.VIEW_DID_UNLOAD="viewControllerViewDidUnload";iAd.ViewController.TRANSITION_IN_FROM_RIGHT={properties:["transform"],from:["translateX(100%)"],to:["translateX(0)"]};iAd.ViewController.TRANSITION_IN_FROM_LEFT={properties:["transform"],from:["translateX(-100%)"],to:["translateX(0)"]};iAd.ViewController.TRANSITION_OUT_TO_RIGHT={properties:["transform"],from:["translateX(0)"],to:["translateX(100%)"]};iAd.ViewController.TRANSITION_OUT_TO_LEFT={properties:["transform"],from:["translateX(0)"],to:["translateX(-100%)"]};iAd.ViewController.TRANSITION_DISSOLVE_OUT={properties:["opacity"],from:[1],to:[0]};iAd.ViewController.TRANSITION_DISSOLVE_IN={properties:["opacity"],from:[0],to:[1]};iAd.ViewController.DECLARATIVE_MIME_TYPE="application/vnd.apple.iadjs; type=view-controllers";iAd.ViewController.ARCHIVE_PREFIX=window.location.href+":";iAd.ViewController.VIEW_ARCHIVE_PREFIX=window.location.href+"-view:";iAd.ViewController.prototype.getView=function(){if(this._view){return this._view}if(this.viewWasArchived){var b=iAd.ViewController.VIEW_ARCHIVE_PREFIX+this.id;var a=window.localStorage[b];delete window.localStorage[b];this.viewWasArchived=false;this.view=iAd.Archiver.restoreWithJSONArchive(a)}if(this._view==null){this.loadView()}return this._view};iAd.ViewController.prototype.setView=function(b){if(this._view instanceof iAd.View){delete this._view._viewController}if(b==null){var a=this.shouldArchiveView;this.shouldArchiveView=false;this.unloadView();this.shouldArchiveView=a;return}if(this.__minimalViewLoadingTime>0){this.__loadViewStartTime=new Date()}b._viewController=this;this._view=b;var c=this.configuration;if(b.usesDeclarativeBacking&&b.layerHasCustomAttribute("ad-content-view")){if(!c.requiredFileURIs){c.requiredFileURIs={}}c.requiredFileURIs.contentView=b.getLayerCustomAttributeValue("ad-content-view")}if(c.requiredFileURIs&&c.requiredFileURIs.contentView){this.loadContentView()}else{if(c.requiredFileURIs&&!this.loadedAllRequiredFiles){this.shouldProcessViewUponRequestsCompleted=true;if(!this.loadingRequiredFiles){this.loadRequiredFiles()}}else{this.processView()}}};iAd.ViewController.prototype.setContentView=function(a){a.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;this._contentView=a};iAd.ViewController.prototype.loadView=function(){this.view=new iAd.View()};iAd.ViewController.prototype.loadContentView=function(){if(this.loadingRequiredFiles){this.shouldSetUpContentViewUponLoad=true}else{if(this.loadedAllRequiredFiles){this.setupContentViewFromLayer()}else{this.shouldSetUpContentViewUponLoad=true;this.loadRequiredFiles()}}};iAd.ViewController.prototype.unloadView=function(){if(this._view==null||!this.isViewLoaded()){return}this.archiveView();this._contentView=null;this._view.removeFromSuperview();this._view=null;this.cleanViewProcessors();this.viewIsLoaded=false;this.viewDidUnload()};iAd.ViewController.prototype.archiveView=function(){if(!this.shouldArchiveView||!this._view||this._contentView){return}window.localStorage[iAd.ViewController.VIEW_ARCHIVE_PREFIX+this.id]=iAd.Archiver.archiveToJSON(this._view);this.viewWasArchived=true};iAd.ViewController.prototype.willEncodeObjectToArchive=function(a){this.archiveView();this.callSuper(a)};iAd.ViewController.prototype.archiveProperty=function(b){var a=this.callSuper(b);if(b=="configuration"){a.id=this.id}return a};iAd.ViewController.prototype.isViewLoading=function(){return(this.loadingRequiredFiles||(this.loadedAllRequiredFiles&&!this.viewIsLoaded))};iAd.ViewController.prototype.isViewLoaded=function(){return this.viewIsLoaded};iAd.ViewController.prototype.viewDidLoad=function(){this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_LOAD)};iAd.ViewController.prototype.viewDidUnload=function(){this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_UNLOAD)};iAd.ViewController.prototype.didReceiveMemoryWarning=function(){if(this.parentViewController==null&&this.isViewLoaded()&&!document.body.contains(this.view.layer)){this.unloadView()}};iAd.ViewController.prototype.setTitle=function(b){this._title=b;var a=this.parentViewController;if(a==null){return}else{if(iAd.TabBarController!=null&&a instanceof iAd.TabBarController){this.tabBarItem.title=b}else{if(iAd.NavigationController!=null&&a instanceof iAd.NavigationController){this.navigationItem.title=b}}}};iAd.ViewController.prototype.isInState=function(a){return this.view.layer.hasClassName(a)};iAd.ViewController.prototype.enterState=function(b){var a=this.view.layer.addClassName(b);if(a){this.dispatchNotification(iAd.ViewController.DID_ENTER_STATE,this.stateChangeDelegate,[["state",b]])}return a};iAd.ViewController.prototype.exitState=function(a){var b=this.view.layer.removeClassName(a);if(b){this.dispatchNotification(iAd.ViewController.DID_EXIT_STATE,this.stateChangeDelegate,[["state",a]])}return b};iAd.ViewController.prototype.toggleState=function(a,b){if(b==null){b=!this.isInState(a)}this[b?"enterState":"exitState"](a)};iAd.ViewController.prototype.enterExclusiveAppearanceState=function(d){var a;for(var b=0,c=iAd.ViewController.APPEARANCE_STATES.length;b<c;b++){a=iAd.ViewController.APPEARANCE_STATES[b];this[(a===d)?"enterState":"exitState"](a)}};iAd.ViewController.prototype.propagateViewAppearanceIfNotInState=function(e,a,d){var c=this.viewAppearancePropagationProperty;var b=c?this[c]:null;if(b&&!b.isInState(d)){b[e](a)}};iAd.ViewController.prototype.viewWillAppear=function(a){this.createAndDispatchEvent(iAd.ViewController.VIEW_WILL_APPEAR_EVENT,[["animated",a]]);this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_WILL_APPEAR_STATE);this.propagateViewAppearanceIfNotInState("viewWillAppear",a,iAd.ViewController.VIEW_DID_APPEAR_STATE)};iAd.ViewController.prototype.viewDidAppear=function(a){this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_DID_APPEAR_STATE);this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_APPEAR_EVENT,[["animated",a]]);this.propagateViewAppearanceIfNotInState("viewDidAppear",a,iAd.ViewController.VIEW_DID_APPEAR_STATE)};iAd.ViewController.prototype.viewWillDisappear=function(a){this.createAndDispatchEvent(iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT,[["animated",a]]);this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE);this.propagateViewAppearanceIfNotInState("viewWillDisappear",a,iAd.ViewController.VIEW_DID_DISAPPEAR_STATE)};iAd.ViewController.prototype.viewDidDisappear=function(a){this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_DID_DISAPPEAR_STATE);this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT,[["animated",a]]);this.propagateViewAppearanceIfNotInState("viewDidDisappear",a,iAd.ViewController.VIEW_DID_DISAPPEAR_STATE);this.resetAllActionLists()};iAd.ViewController.prototype.presentModalViewControllerAnimated=function(b,a){this.modalViewController=b};iAd.ViewController.prototype.dismissModalViewControllerAnimated=function(a){this.modalViewController=null};iAd.ViewController.prototype.parentControllerOfKind=function(b){var a=this;while((a=a.parentViewController)){if(a instanceof b){return a}}return null};iAd.ViewController.prototype.getLoadingRequiredFiles=function(){return(this.requiredFilesLoader&&this.requiredFilesLoader.loading)};iAd.ViewController.prototype.getLoadedAllRequiredFiles=function(){var a=this.requiredFilesLoader;return(a&&(a.loaded||a.length==0))};iAd.ViewController.prototype.loadRequiredFiles=function(){if(this.loadedAllRequiredFiles){return}if(!this.requiredFilesLoader){this.requiredFilesLoader=new iAd.ViewControllerRequiredFilesLoader(this)}this.dispatchNotification(iAd.ViewController.WILL_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate);var a=this.requiredFilesLoader;if(a.length>0){a.load();this.notifyPropertyChange("loadingRequiredFiles")}else{this.dispatchNotification(iAd.ViewController.DID_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate)}};iAd.ViewController.prototype.abortLoadRequiredFiles=function(){if(this.requiredFilesLoader.loading){this.requiredFilesLoader.abort()}};iAd.ViewController.prototype.handleEvent=function(a){};iAd.ViewController.prototype.setupContentViewFromLayer=function(){var a=iAd.Element.elementFromString(this.requiredFilesLoader.contentViewMarkup);this._view.hostingLayer.appendChild(a);if(!a.hasAttribute("id")){a.id=this.id}var b=iAd.View.viewForLayer(a);b.superview=this._view;b._indexInSuperviewSubviews=this._view.subviews.push(b)-1;this.contentView=b;if(b.declarativeLayerWasInitialized){this.processView()}else{b.addPropertyObserver("declarativeLayerWasInitialized",this,"processView")}};iAd.ViewController.prototype.requiredFilesLoaderDidProgress=function(a,c,b){if(b.loaded){this.dispatchNotification(iAd.ViewController.PROGRESS_LOADING_REQUIRED_FILES,this.requiredFilesLoadDelegate,[["progress",c],["url",b.url]])}else{if(b.error){iAd.Console.warn("iAd.ViewController — could not load required file with URI "+b.url)}}};iAd.ViewController.prototype.requiredFilesLoaderDidComplete=function(a){this.dispatchNotification(iAd.ViewController.DID_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate);this.notifyPropertyChange("loadingRequiredFiles");if(this.shouldSetUpContentViewUponLoad){this.setupContentViewFromLayer()}else{if(this.shouldProcessViewUponRequestsCompleted){this.processView()}}};iAd.ViewController.prototype.requiredFilesLoaderDidFail=function(a,b){if(b!=iAd.Loader.LOAD_ABORTED){return}var e=[];var f=this.requiredFilesLoader.openLoaders;for(var c=0,d=f.length;c<d;c++){e.push(f[c].url)}this.notifyPropertyChange("loadingRequiredFiles");this.dispatchNotification(iAd.ViewController.DID_ABORT_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate,[["uris",e]])};iAd.ViewController.prototype.processView=function(){if(!this._view.layer.hasAttribute("id")){this._view.id=this.id+((this.configuration.hasOwnProperty("requiredFileURIs")&&this.configuration.requiredFileURIs.hasOwnProperty("contentView"))?"-container":"")}this.viewProcessors=[];var d;for(var b=0,c=iAd.ViewController.viewProcessors.length;b<c;b++){d=new iAd.ViewController.viewProcessors[b](this);d.processView(this._view);this.viewProcessors.push(d)}if(this.__minimalViewLoadingTime>0){var a=(Date.now()-this.__loadViewStartTime)/1000;if(a<this.__minimalViewLoadingTime){this.callMethodNameAfterDelay("viewProcessingDidComplete",this.__minimalViewLoadingTime-a);return}}this.viewProcessingDidComplete()};iAd.ViewController.prototype.viewProcessingDidComplete=function(){if(!this.viewIsLoaded){this.viewIsLoaded=true;this.viewDidLoad()}this.viewWasProcessed=true};iAd.ViewController.prototype.cleanViewProcessors=function(){while(this.viewProcessors.length){this.viewProcessors.pop().cleanUp()}this.viewWasProcessed=false};iAd.ViewController.uniqueId=function(){return"vc-"+Math.floor(Math.random()*10000000000)};iAd.ViewController.addViewProcessor=function(a){iAd.ViewController.viewProcessors.push(a)};iAd.ViewController.init=function(){iAd.Class.processAllClasses();var c=document.scripts;var a;for(var b=0,d=c.length;b<d;b++){a=c[b];if(a.type==iAd.ViewController.DECLARATIVE_MIME_TYPE){iAd.ViewController.handleScriptElementForDeclarativeViewControllers(a)}}window.addEventListener("ADMemoryLevelWarning",iAd.ViewController.handleMemoryWarning,true);window.addEventListener("ADMemoryLevelUrgent",iAd.ViewController.handleMemoryWarning,true)};iAd.ViewController.handleScriptElementForDeclarativeViewControllers=function(c){if(c.src!=""){var b=new XMLHttpRequest();b._url=c.src;b.addEventListener("load",this.handleEventProxy,false);b.addEventListener("error",this.handleEventProxy,false);b.open("GET",b._url,true);b.send()}else{var a=Function("undefined","return ("+c.textContent+");")();setTimeout(function(){iAd.ViewController.handleDeclarativeViewControllerDefinitions(a)},0)}};iAd.ViewController.handleEventProxy=function(a){iAd.ViewController.handleEvent(a)};iAd.ViewController.handleEvent=function(c){var b=c.target;switch(c.type){case"load":var a=Function("undefined","return ("+b.responseText+");")();iAd.ViewController.handleDeclarativeViewControllerDefinitions(a);break;case"error":iAd.Console.error("Failed to read content from JSON file "+b._url);break}};iAd.ViewController.handleDeclarativeViewControllerDefinitions=function(b){if(iAd.Utils.objectIsArray(b)){for(var a=0,c=b.length;a<c;a++){iAd.ViewController.viewControllerWithConfiguration(b[a])}}else{iAd.ViewController.viewControllerWithConfiguration(b)}};iAd.ViewController.viewControllerWithConfiguration=function(a){return new (iAd.ViewController.constructorMap[a.type]||iAd.ViewController)(a)};iAd.ViewController.constructorMap={};iAd.ViewController.handleMemoryWarning=function(b){var c=iAd.ViewController.instances;for(var a in c){c[a].didReceiveMemoryWarning()}};iAd.ViewController.prototype.startAction=function(c){var d=iAd.Utils.resolveObjectPath(c.className);if(!d){throw iAd.ActionListManager.INVALID_CLASS_NAME_EXCEPTION}var e=new d(this);var b=c.properties;for(var a in b){e[a]=b[a]}if(c.delay){e.delay=c.delay}e.prepare();e.run()};iAd.ViewController.prototype.loadActionList=function(c){var a=c.name,b=c.cssClassName;if(a&&c.actions.length>0){this.actionListByName[a]=c;if(b==null){c.cssClassName=b=a.replace(/\s+/g,"-").toLowerCase()}this.actionListNameByClassName[b]=a}};iAd.ViewController.prototype.startActionList=function(a){var b=this.actionListByName[a];if(!b){return}var c=this.actionListManagersByName[a];if(!c){this.actionListManagersByName[a]=c=new iAd.ActionListManager(b,this)}c.callMethodNameAfterDelay("start",0)};iAd.ViewController.prototype.cancelActionList=function(a){var b=this.actionListManagersByName[a];if(!b){return}b.reset()};iAd.ViewController.prototype.resetAllActionLists=function(){for(var a in this.actionListManagersByName){this.actionListManagersByName[a].reset()}};iAd.ViewController.prototype.hasActionList=function(a){return !!this.actionListByName[a]};iAd.ViewController.prototype.dispatchActionListNotification=function(a,b){this.notifyDelegate(a,this.transitionController,b);this.dispatchNotification(a,this.actionListDelegate,b)};iAd.ViewController.prototype.actionListWillStart=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_WILL_START,[["actionList",a]])};iAd.ViewController.prototype.actionListDidStart=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_START,[["actionList",a]])};iAd.ViewController.prototype.actionListWillIterate=function(c,a,b){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_WILL_ITERATE,[["actionList",a],["iteration",b]])};iAd.ViewController.prototype.actionListDidIterate=function(c,a,b){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_ITERATE,[["actionList",a],["iteration",b]])};iAd.ViewController.prototype.actionListWillComplete=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_WILL_COMPLETE,[["actionList",a]])};iAd.ViewController.prototype.actionListDidComplete=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_COMPLETE,[["actionList",a]])};iAd.ViewController.prototype.actionListDidCancel=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_CANCEL,[["actionList",a]])};iAd.ViewController.prototype.actionListDidProgress=function(d,b,c,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_PROGRESS,[["actionList",b],["action",c],["progress",a]])};iAd.ViewController.orientationDidChange=function(a){var b=this.instances;for(var c in b){b[c].didRotateFromInterfaceOrientation(a)}};iAd.ViewController.prototype.getInterfaceOrientation=function(){return iAd.Device.orientation};iAd.ViewController.prototype.didRotateFromInterfaceOrientation=function(a){};iAd.ViewController.prototype.archive=function(){var a=iAd.ViewController.ARCHIVE_PREFIX+this.id;window.localStorage[a]=iAd.Archiver.archiveToJSON(this)};iAd.ViewController.restore=function(c){var b=iAd.ViewController.ARCHIVE_PREFIX+c;var a=window.localStorage[b];return a?iAd.Archiver.restoreWithJSONArchive(a):null};iAd.ViewController.clearArchives=function(){for(var a in window.localStorage){if(a.indexOf(iAd.ViewController.ARCHIVE_PREFIX)==0||a.indexOf(iAd.ViewController.VIEW_ARCHIVE_PREFIX)==0){delete window.localStorage[a]}}};iAd.ViewController.initialize=function(){iAd.ViewController.constructorMap[this.displayName]=this};iAd.View.prototype.containingViewController=function(){var a=this;while(a){if(a._viewController){return a._viewController}a=a.superview}};iAd.Class.processMethods(iAd.View,["containingViewController"]);window.addEventListener("DOMContentLoaded",iAd.ViewController.init,true);