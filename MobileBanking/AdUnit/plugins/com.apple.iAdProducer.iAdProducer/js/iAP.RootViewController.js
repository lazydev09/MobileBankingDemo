
/**
*
* Copyright Â© 2009-2011 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.RootViewController",superclass:iAd.RootViewController,mixins:[iAd.EventTarget]});iAP.RootViewController.AD_DID_FINISH_LAUNCHING_EVENT="adDidFinishLaunching";iAP.RootViewController.AD_WILL_PAUSE_EVENT="adWillPause";iAP.RootViewController.AD_DID_RESUME_EVENT="adDidResume";iAP.RootViewController.AD_WILL_BE_DISMISSED_EVENT="adWillBeDismissed";iAP.RootViewController.prototype.init=function(c){this.callSuper(c);this.eventTarget=document;if(!iAd.Utils.isRunningInAdContext&&this.targetDevice){if(this.targetDevice==="iPad"){iAd.Device.IS_IPAD=true;document.body.addClassName("ad-iPad")}}var b=this;var a=iAd.ViewController.viewControllerWithConfiguration;iAd.ViewController.viewControllerWithConfiguration=function(e){var d=a.apply(this,arguments);if(d.configuration.id==b.initialViewControllerID){if(window.editorProxy||b.stackController==null){b.transitionController.setVisibleViewControllerAnimated(d,true)}else{b.stackController.pushViewControllerAnimated(d,true);b.stackController.autoReversesTransitions=true}}return d};if(iAd.Utils.isRunningInAdContext){window.ad.listener=this;this.registerItemsForPurchase(this.iTunesStoreIds)}if(c.videoWifiToCellularMapping){iAd.VideoWifiToCellularMapping=c.videoWifiToCellularMapping}};iAP.RootViewController.prototype.registerItemsForPurchase=function(c){var a,b;if(c&&typeof(c.map)==="function"&&c.length>0){this.iTunesStoreIds=a=c}else{this.purchaseItemsWereRegistered=false;return false}b=a.map(function(d){return parseInt(d,10)});window.ad.store.registerItemsForPurchase(b);this.purchaseItemsWereRegistered=true;return true};iAP.RootViewController.prototype.getStackController=function(){var a=this.callSuper();a.backingTransitionController.hidesLoadingViewControllerWithTransition=false;return a};iAP.RootViewController.createRootViewController=function(a){window.addEventListener("DOMContentLoaded",function(){var b=new iAP.RootViewController(a);b.setupEventDelegate();b.createAndDispatchEvent(iAP.RootViewController.AD_DID_FINISH_LAUNCHING_EVENT)});iAP.RootViewController.configureViewport()};iAP.RootViewController.prototype.setupEventDelegate=function(){var b=iAP.EventDelegate.viewControllerScriptFunctions[this.configuration.id];if(b){var a=new iAP.EventDelegate(this,window,b);a.processUserScript()}};iAP.RootViewController.prototype.adDidResume=function(){this.createAndDispatchEvent(iAP.RootViewController.AD_DID_RESUME_EVENT)};iAP.RootViewController.prototype.adWillBeDismissed=function(){this.createAndDispatchEvent(iAP.RootViewController.AD_WILL_BE_DISMISSED_EVENT)};iAP.RootViewController.prototype.adWillPause=function(){this.createAndDispatchEvent(iAP.RootViewController.AD_WILL_PAUSE_EVENT)};iAP.RootViewController.configureViewport=function(){var a=document.createElement("meta");a.setAttribute("name","viewport");a.setAttribute("content","width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no");document.head.appendChild(a);if(iAd.Utils.isRunningInAdContext!==true){var b=document.createElement("meta");b.setAttribute("name","apple-mobile-web-app-capable");b.setAttribute("content","yes");document.head.appendChild(b)}};