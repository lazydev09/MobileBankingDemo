
/**
*
* Copyright Â© 2009-2011 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.RootView",superclass:iAd.View,synthesizedProperties:["disablesDefaultScrolling","scrollsHorizontally","scrollsVertically"],archivedProperties:["disablesDefaultScrolling","scrollsHorizontally","scrollsVertically"],cssClassName:"ad-root-view"});iAd.RootView.prototype.init=function(a){this.callSuper(a);if(this.layer===document.body){this.layerIsInDocument=true;this._size=new iAd.Size(window.innerWidth,window.innerHeight);this.layer.removeClassName("ad-view");window.addEventListener(iAd.Device.iOS_VERSION?"orientationchange":"resize",this,true)}this._scrollsHorizontally=false;this._scrollsVertically=true;this.disablesDefaultScrolling=true;iAd.RootView.sharedRoot=this};iAd.RootView.prototype.createLayer=function(){this.layer=document.body};iAd.RootView.prototype.setDisablesDefaultScrolling=function(a){this._disablesDefaultScrolling=a;this.updateSize();if(!iAd.HostScrollView){this.layer[a?"addEventListener":"removeEventListener"](iAd.Event.MOVE_EVENT,iAd.Event.preventDefault,false)}};iAd.RootView.prototype.handleEvent=function(a){this.callSuper(a);if(a.type=="resize"||a.type=="orientationchange"){this.updateSize();if(this._disablesDefaultScrolling){window.scrollTo(0,0)}}};iAd.RootView.prototype.updateSize=function(){if(this.layer!==document.body){return}if(this._disablesDefaultScrolling){this.size=new iAd.Size(window.innerWidth,window.innerHeight)}else{this._size=new iAd.Size(document.body.offsetWidth,document.body.offsetHeight);this.notifyPropertyChange("size")}};iAd.RootView._sharedRoot=null;Object.defineProperty(iAd.RootView,"sharedRoot",{get:function(){if(iAd.RootView._sharedRoot==null){iAd.RootView._sharedRoot=new iAd.RootView()}return iAd.RootView._sharedRoot},set:function(a){iAd.RootView._sharedRoot=a}});iAd.RootView.init=function(){document.body.addClassName(iAd.Device.HAS_HIDPI_DISPLAY?"ad-HiDPI":"ad-LoDPI");if(iAd.Device.IS_IPAD){document.body.addClassName("ad-iPad")}if(iAd.RootView._sharedRoot==null){var a=document.querySelector("."+iAd.RootView.cssClassName);if(a!=null){iAd.RootView._sharedRoot=new iAd.RootView(a)}}};window.addEventListener("DOMContentLoaded",iAd.RootView.init,true);